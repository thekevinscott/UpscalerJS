"use strict";(self.webpackChunk_upscalerjs_docs=self.webpackChunk_upscalerjs_docs||[]).push([[5467],{54852:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>p});var a=n(49231);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=d(n),p=o,g=u["".concat(s,".").concat(p)]||u[p]||m[p]||l;return n?a.createElement(g,r(r({ref:t},c),{},{components:n})):a.createElement(g,r({ref:t},c))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var d=2;d<l;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},49262:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(49231);const o="options_m2t7",l="option_RQh5",r="container_UfJ0",i="sampleTable_uRA1",s=n.p+"assets/images/flower-68f7f0f3aef93b31d3970db3321c8179.png",d=128;function c(e){let{packageName:t,models:n,scales:c}=e;const[m,u]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),f=(0,a.useMemo)((()=>c.reduce(((e,t)=>e<t?t:e),-1/0)),[c]),h=(0,a.useMemo)((()=>c.reduce(((e,t)=>p?e+f*d:e+t*d),p?f*d:d)),[c,p]);return a.createElement(a.Fragment,null,a.createElement("div",{className:o},a.createElement("div",{className:l},a.createElement("label",{htmlFor:"bicubic"},"View non-upscaled versions"),a.createElement("input",{onClick:()=>u((e=>!e)),type:"checkbox",id:"bicubic",name:"bicubic"})),a.createElement("div",{className:l},a.createElement("label",{htmlFor:"sameSize"},"View images all at same size"),a.createElement("input",{onClick:()=>g((e=>!e)),type:"checkbox",id:"sameSize",name:"same-size"}))),a.createElement("div",{className:r},a.createElement("table",{className:i,width:h},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Original"),n.map((e=>a.createElement("th",{key:e},e," ",m?"Original":"Upscaled"))))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("img",{alt:"Original image",src:s,width:p?f*d:d})),n.map(((e,n)=>{const o=c[n],l=(p?f:o)*d,r=m?s:`/assets/sample-images/${t}/samples/${e}/flower.png`;return a.createElement("td",{key:e},a.createElement("img",{alt:`Upscaled image using ${t}/${e}`,src:r,width:l}))})))))))}},4513:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(74011),o=(n(49231),n(54852)),l=n(49262);const r={category:"Node",hide_table_of_contents:!0,sidebar_position:1002,code_embed:{params:"view=split,preview&module=index.js&hidenavigation=1",type:"codesandbox",url:"/examples/nodejs-model"}},i="Node.js Model Guide",s={unversionedId:"documentation/guides/node/nodejs-model",id:"documentation/guides/node/nodejs-model",title:"Node.js Model Guide",description:"Demonstration of loading a model in Node.js.",source:"@site/docs/documentation/guides/node/nodejs-model.md",sourceDirName:"documentation/guides/node",slug:"/documentation/guides/node/nodejs-model",permalink:"/documentation/guides/node/nodejs-model",draft:!1,tags:[],version:"current",sidebarPosition:1002,frontMatter:{category:"Node",hide_table_of_contents:!0,sidebar_position:1002,code_embed:{params:"view=split,preview&module=index.js&hidenavigation=1",type:"codesandbox",url:"/examples/nodejs-model"}},sidebar:"documentationSidebar",previous:{title:"Node.js Example",permalink:"/documentation/guides/node/nodejs"},next:{title:"Node.js Custom Models Guide",permalink:"/documentation/guides/node/nodejs-custom-models"}},d={},c=[{value:"Motivation",id:"motivation",level:2},{value:"Installing",id:"installing",level:2},{value:"Code",id:"code",level:2},{value:"How Models are Loaded in Node.js",id:"how-models-are-loaded-in-nodejs",level:2}],m={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"nodejs-model-guide"},"Node.js Model Guide"),(0,o.kt)("p",null,"Demonstration of loading a model in Node.js."),(0,o.kt)("a",{href:"https://githubbox.com/thekevinscott/upscalerjs/tree/main/examples/nodejs-model"},"Open in CodeSandbox"),".",(0,o.kt)("h2",{id:"motivation"},"Motivation"),(0,o.kt)("p",null,"UpscalerJS uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"default-model")," as its default, which is tuned to run quickly at the cost of inference accuracy. This is great for the browser, but we'll probably want something more accurate for the server."),(0,o.kt)("p",null,"UpscalerJS offers a number of ",(0,o.kt)("a",{parentName:"p",href:"/models#models-1"},"models")," for download and installation, depending on the use case. "),(0,o.kt)("h2",{id:"installing"},"Installing"),(0,o.kt)("p",null,"In this example, ",(0,o.kt)("a",{parentName:"p",href:"/models/available/esrgan-thick"},"we'll use ",(0,o.kt)("inlineCode",{parentName:"a"},"esrgan-thick")),", the most performant model. Install the model with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @upscalerjs/esrgan-thick\n")),(0,o.kt)("h2",{id:"code"},"Code"),(0,o.kt)("p",null,"We'll need to decide what ",(0,o.kt)("em",{parentName:"p"},"scale")," model we wish to use. The larger the scale, generally the less accurate the resulting upscaled image will be."),(0,o.kt)(l.Z,{packageName:"esrgan-thick",models:["2x","3x","4x"],scales:[2,3,4],mdxType:"SampleTable"}),(0,o.kt)("p",null,"We'll use the 2x scale model. We can import the specific model with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const x2 = require('@upscalerjs/esrgan-thick/2x')\n")),(0,o.kt)("p",null,"And we can then pass the model as an argument to our upscaler:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const Upscaler = require('upscaler/node')\nconst upscaler = new Upscaler({\n  model: x2,\n})\n")),(0,o.kt)("p",null,"The resulting image will be upscaled using the ",(0,o.kt)("inlineCode",{parentName:"p"},"esrgan-thick")," model."),(0,o.kt)("h2",{id:"how-models-are-loaded-in-nodejs"},"How Models are Loaded in Node.js"),(0,o.kt)("p",null,"Unlike in the browser, where models need to be available via a URL, in Node.js UpscalerJS will attempt to load models from the local filesystem's appropriate ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," folder."))}u.isMDXComponent=!0}}]);